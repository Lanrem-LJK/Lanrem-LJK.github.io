<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jingkai LAN</title>
  <meta name="description" content="Jingkai LAN (蓝靖凯) – M.Sc. in Bioinformatics and Computational Biology exploring life sciences with deep learning and machine learning." />
  <meta name="keywords" content="Jingkai LAN, Bioinformatics, Computational Biology, Deep Learning, Machine Learning, University of Bern, Shihezi University" />
  <meta name="author" content="Jingkai LAN" />

  <!-- Leaflet CSS (via jsDelivr CDN) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.css" />

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-database-compat.js"></script>

  <style>
    body { font-family: "Helvetica Neue", Arial, sans-serif; margin: 0; padding: 0; background-color: #f9fafb; color: #333; }
    .container { max-width: 900px; margin: 0 auto; padding: 60px 20px; display: flex; gap: 40px; align-items: flex-start; }
    h1 { margin: 0 0 10px; font-size: 2.2rem; color: #1e3a8a; }
    h2 { margin: 25px 0 10px; font-size: 1.3rem; color: #374151; }
    p  { line-height: 1.6; font-size: 1rem; }
    ul { list-style-type: disc; padding-left: 20px; }
    .photo { flex: 0 0 220px; }
    .photo img { width: 220px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,.1); }
    .content { flex: 1; }
    .links { margin-top: 20px; }
    .links a { display: inline-block; margin-right: 18px; font-weight: 600; color: #2563eb; text-decoration: none; transition: color .2s; }
    .links a:hover { color: #1d4ed8; text-decoration: underline; }
    .project-section { max-width: 900px; margin: 0 auto; padding: 20px; }
    .project { display: flex; gap: 30px; align-items: flex-start; margin-top: 30px; }
    .project-gif img { width: 260px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,.08); }
    .project-content h3 { margin: 0 0 10px; font-size: 1.25rem; color: #1e3a8a; }
    .project-content h3 a { color: inherit; text-decoration: none; }
    .project-content h3 a:hover { text-decoration: underline; }
    .project-buttons { margin-top: 12px; }
    .btn { display: inline-block; padding: 6px 14px; background: #2563eb; color: #fff; border-radius: 4px; font-size: .9rem; font-weight: 600; text-decoration: none; transition: background .2s; }
    .btn:hover { background: #1d4ed8; }
    .collab-logos { max-width: 900px; margin: 30px auto; padding: 20px 0; text-align: center; }
    .collab-logos a { display: inline-block; margin: 0 25px; }
    .collab-logos img { height: 80px; width: auto; opacity: .9; transition: opacity .2s; }
    .collab-logos img:hover { opacity: 1; }
    .carousel {position: relative;width: 260px;height: 260px;overflow: hidden;border-radius: 8px;box-shadow: 0 4px 8px rgba(0,0,0,.08);}
    .carousel img {position: absolute;inset: 0;width: 100%;height: 100%;object-fit: contain;opacity: 0;transition: opacity .6s ease-in-out;}
    .carousel img.active {opacity: 1;}
    #map { width: 100%; height: 500px; margin-top: 40px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,.1); }
    @media (max-width: 640px) { .container{flex-direction:column;align-items:center;} .photo{margin-bottom:20px;} .project{flex-direction:column;} .project-gif img{width:100%;} .collab-logos img{height:60px;} #map{height:400px;} }

  </style>
</head>
<body>
  <!-- ===== 个人信息 ===== -->
  <div class="container">
    <div class="photo"><img src="Figs/Photo.jpg" alt="Jingkai LAN" /></div>
    <div class="content">
      <h1>Jingkai LAN (蓝靖凯)</h1>
      <p>I am passionate about applying <strong>deep learning</strong> and <strong>machine learning</strong> to address scientific challenges and real-world problems.</p>

      <h2>Education</h2>
      <ul>
        <li>M.Sc. in Bioinformatics and Computational Biology, University of Bern</li>
        <li>B.Sc. in Biological Sciences, Shihezi University</li>
      </ul>
      <div class="links">
        <a href="Document/Lan_Jingkai-CV.pdf" target="_blank">CV</a>
        <a href="https://www.linkedin.com/in/jingkai-lan-42b8b42a4/" target="_blank">Linkedin</a>
        <a href="https://github.com/Lanrem-LJK" target="_blank">GitHub</a>
        <a href="https://www.kaggle.com/bimmortal" target="_blank">Kaggle</a>
        <a href="mailto:jingkai.bio@gmail.com">Email</a>
      </div>
    </div>
  </div>

  <hr style="border:0;height:1px;background:#e5e7eb;margin:0;" />

  <!-- ===== 项目展示 ===== -->
  <section class="project-section">
    <h2>Projects</h2>

    <div class="project">
      <div class="project-gif"><img src="Figs/gif/Metal_Protein.gif" alt="Metal Protein Prediction" /></div>
      <div class="project-content">
        <h3><a href="#" target="_blank">Using Deep Learning Methods to Predict Metal Sites in Metalloproteins</a></h3>
        <p><em>M.Sc. Thesis, University of Bern</em></p>
        <p><strong>Jingkai LAN</strong>, Giulia Peteani, Thomas Lemmin</p>
        <p>Integrated metal‑binding protein sequences and extracted binding‑site data from two publicly available databases (MESPEUS and MbPA). Generated non‑metal‑binding protein sequences by mutating metal‑binding sites using AI‑driven design tools (ProteinMPNN, ESM‑Fold, CHAI 1). Developed deep‑learning models to classify metalloproteins, predict enzymatic activity, and identify metal‑binding sites.</p>
        <div class="project-buttons"><a class="btn" href="Document/Slides/Metal_binding_site_prediction_of_Metalloprotein.pdf" target="_blank">Slides</a></div>
      </div>
    </div>

    <div class="project">
      <div class="project-gif carousel" data-carousel-id="btc">
        <img src="Figs/Bitcoin_01.png" alt="Bitcoin chart 1" class="active" />
        <img src="Figs/Bitcoin_02.png" alt="Bitcoin chart 2" />
      </div>

      <div class="project-content">
        <h3><a href="#" target="_blank">Using NLP Method to Forecast Bitcoin Volatility</a></h3>
        <p><em>Personal project</em></p>
        <p><strong>Jingkai LAN</strong></p>
        <p>Leveraging five years of 3-minute BTC-USDT perpetual-futures closing prices, the raw time-series data are pre-processed, standardised and rendered as natural-language sequences consumable by NLP models. A binary classifier predicts whether the closing price will move sharply (│Δ│ &gt; 0.5 %) within the next 30 minutes. Five-fold cross-validation with an Adapter-augmented BERT backbone achieves an accuracy of 69.9 %, recall 70.1 %, and precision 94.5 %.</p>
      </div>
    </div>
  </section>

  <hr style="border:0;height:1px;background:#e5e7eb;margin:0;" />

    <!-- ===== 合作 Logo ===== -->
  <section class="collab-logos">
    <a href="https://www.unibe.ch/" target="_blank" rel="noopener"><img src="Figs/logos/bern_logo.png" alt="University of Bern logo" /></a>
    <a href="https://www.shzu.edu.cn/" target="_blank" rel="noopener"><img src="Figs/logos/Shihezi_University_logo.png" alt="Shihezi University logo" /></a>
  </section>

  <!-- ===== 世界访客地图 ===== -->
  <section style="max-width:900px;margin:0 auto;padding:0 20px 60px;">
    <h2>Visitor Map</h2>
    <p style="font-size:.9rem;color:#555;">Each dot marks a unique visit (based on IP &amp; coarse geo‑location). Data are stored anonymously in Firebase Realtime Database. </p>
    <div id="map"></div>
  </section>

  <!-- Leaflet JS -->
  <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.js"></script>

  <script>

    /* ===== 简易轮播逻辑 ===== */
    document.querySelectorAll('.carousel').forEach(carousel => {
      const slides = carousel.querySelectorAll('img');
      let index = 0;
      setInterval(() => {
        // 隐藏当前
        slides[index].classList.remove('active');
        // 指向下一张
        index = (index + 1) % slides.length;
        // 显示下一张
        slides[index].classList.add('active');
      }, 2000);   // 4 秒 / 张，可按需调整
    });

    /* ---------------- Firebase INITIALISATION (真实配置) ---------------- */
    const firebaseConfig = {
      apiKey: "AIzaSyDNEtRx0IQpgQ7MUq_5UvvFY9Np7BW0eeI",
      authDomain: "lanrem-ljk.firebaseapp.com",
      databaseURL: "https://lanrem-ljk-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "lanrem-ljk",
      storageBucket: "lanrem-ljk.appspot.com",
      messagingSenderId: "182202252009",
      appId: "1:182202252009:web:06bfbf04bf7a36c5040e78",
      measurementId: "G-FSZ9EBDE30"
    };

    let db = null;
    try {
      const app = firebase.initializeApp(firebaseConfig);
      // 如果 Analytics SDK 加载成功则初始化
      if (firebase.analytics) firebase.analytics();
      db = firebase.database();
    } catch (e) {
      console.warn('[Firebase] init failed:', e);
    }

    /* ---------------- Leaflet MAP ---------------- */
    const map = L.map('map').setView([20, 0], 2);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 18,
      attribution: '&copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors'
    }).addTo(map);

    function addMarker(lat, lon) {
      L.circleMarker([lat, lon], {
        radius: 5,
        fillColor: '#2563eb',
        color: '#1d4ed8',
        weight: 1,
        opacity: 0.9,
        fillOpacity: 0.8
      }).addTo(map);
    }

    /* ---------------- Database helpers ---------------- */
    function writeVisit(data) {
      if (!db) return Promise.resolve();
      return db.ref('visitors').push(data).catch(err => {
        console.warn('[Firebase] write failed:', err);
      });
    }

    function alreadyLogged(ip) {
      if (!db) return Promise.resolve(false);
      return db.ref('visitors').orderByChild('ip').equalTo(ip).once('value').then(snap => snap.exists()).catch(() => false);
    }

    function loadMarkers() {
      if (!db) return;
      db.ref('visitors').once('value').then(snapshot => {
        snapshot.forEach(child => {
          const { lat, lon } = child.val();
          if (lat && lon) addMarker(lat, lon);
        });
      }).catch(err => console.warn('[Firebase] read failed:', err));
    }

    /* ---------------- Main ---------------- */
    fetch('https://ipapi.co/json/')
      .then(resp => resp.json())
      .then(async data => {
        const ip      = data.ip;
        const lat     = parseFloat(data.latitude);
        const lon     = parseFloat(data.longitude);
        const city    = data.city;
        const country = data.country_name;

        // 先在前端画出本次访问的点 ✔️
        if (lat && lon) addMarker(lat, lon);

        // 再尝试把数据写进 DB
        try {
          const exists = await alreadyLogged(ip);
          if (!exists) await writeVisit({ ip, lat, lon, city, country, ts: Date.now() });
        } catch (e) { /* 已在 helper 中打印 */ }
      })
      .catch(err => console.warn('[IP lookup] failed:', err))
      .finally(loadMarkers);
  </script>
</body>
</html>
