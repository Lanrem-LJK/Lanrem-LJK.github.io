<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jingkai LAN</title>
  <meta name="description" content="Jingkai LAN (蓝靖凯) – M.Sc. in Bioinformatics and Computational Biology exploring life sciences with deep learning and machine learning." />
  <meta name="keywords" content="Jingkai LAN, Bioinformatics, Computational Biology, Deep Learning, Machine Learning, University of Bern, Shihezi University" />
  <meta name="author" content="Jingkai LAN" />

  <!-- Leaflet CSS  (via jsDelivr CDN – 无 SRI, 避免 hash 不匹配) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.css" />

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-database-compat.js"></script>

  <style>
    body {
      font-family: "Helvetica Neue", Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f9fafb;
      color: #333;
    }

    /* --------- 通用布局 --------- */
    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 60px 20px;
      display: flex;
      gap: 40px;
      align-items: flex-start;
    }

    h1 {
      margin: 0 0 10px;
      font-size: 2.2rem;
      color: #1e3a8a;
    }

    h2 {
      margin: 25px 0 10px;
      font-size: 1.3rem;
      color: #374151;
    }

    p {
      line-height: 1.6;
      font-size: 1rem;
    }

    ul {
      list-style-type: disc;
      padding-left: 20px;
    }

    /* --------- 个人信息部分 --------- */
    .photo {
      flex: 0 0 220px;
    }

    .photo img {
      width: 220px;
      height: auto;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .content {
      flex: 1;
    }

    /* --------- 链接样式 --------- */
    .links {
      margin-top: 20px;
    }

    .links a {
      display: inline-block;
      margin-right: 18px;
      font-weight: 600;
      text-decoration: none;
      color: #2563eb;
      transition: color 0.2s ease-in-out;
    }

    .links a:hover {
      color: #1d4ed8;
      text-decoration: underline;
    }

    /* --------- 项目部分 --------- */
    .project-section {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
    }

    .project {
      display: flex;
      gap: 30px;
      align-items: flex-start;
      margin-top: 30px;
    }

    .project-gif img {
      width: 260px;
      height: auto;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
    }

    .project-content h3 {
      margin: 0 0 10px;
      font-size: 1.25rem;
      color: #1e3a8a;
    }

    .project-content h3 a {
      color: inherit;
      text-decoration: none;
    }

    .project-content h3 a:hover {
      text-decoration: underline;
    }

    /* ---- Project button (Slides) ---- */
    .project-buttons {
      margin-top: 12px;
    }

    .btn {
      display: inline-block;
      padding: 6px 14px;
      background-color: #2563eb;
      color: #fff;
      border-radius: 4px;
      font-size: 0.9rem;
      font-weight: 600;
      text-decoration: none;
      transition: background-color 0.2s ease-in-out;
    }

    .btn:hover {
      background-color: #1d4ed8;
    }

    /* --------- 合作 LOGO 部分 --------- */
    .collab-logos {
      max-width: 900px;
      margin: 30px auto;
      padding: 20px 0;
      text-align: center;
    }

    .collab-logos a {
      display: inline-block;
      margin: 0 25px;
    }

    .collab-logos img {
      height: 80px; /* 统一高度，宽度自适应 */
      width: auto;
      vertical-align: middle;
      opacity: 0.9;
      transition: opacity 0.2s ease-in-out;
    }

    .collab-logos img:hover {
      opacity: 1;
    }

    /* --------- 地图 --------- */
    #map {
      width: 100%;
      height: 500px;
      margin-top: 40px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    /* --------- 响应式 --------- */
    @media (max-width: 640px) {
      .container {
        flex-direction: column;
        align-items: center;
      }
      .photo {
        margin-bottom: 20px;
      }
      .project {
        flex-direction: column;
      }
      .project-gif img {
        width: 100%;
      }
      .collab-logos img {
        height: 60px; /* 在小屏幕上稍微再缩小 */
      }
      #map {
        height: 400px;
      }
    }
  </style>
</head>
<body>
  <!-- ===== 个人信息 ===== -->
  <div class="container">
    <div class="photo">
      <img src="Figs/Photo.jpg" alt="Jingkai LAN" />
    </div>
    <div class="content">
      <h1>Jingkai LAN (蓝靖凯)</h1>
      <p>I have a strong interest in how <strong>deep learning</strong> and <strong>machine learning</strong> can be used to explore life sciences.</p>

      <h2>Education</h2>
      <ul>
        <li>M.Sc. in Bioinformatics and Computational Biology, University of Bern</li>
        <li>B.Sc. in Biological Sciences, Shihezi University</li>
      </ul>

      <div class="links">
        <a href="Document/Lan_Jingkai-CV.pdf" target="_blank">CV</a>
        <a href="https://www.linkedin.com/in/jingkai-lan-42b8b42a4/" target="_blank">Linkedin</a>
        <a href="https://github.com/Lanrem-LJK" target="_blank">GitHub</a>
        <a href="https://www.kaggle.com/bimmortal" target="_blank">Kaggle</a>
        <a href="mailto:jingkai.bio@gmail.com">Email</a>
      </div>
    </div>
  </div>

  <hr style="border: 0; height: 1px; background: #e5e7eb; margin: 0;" />

  <!-- ===== 项目展示 ===== -->
  <section class="project-section">
    <h2>Projects</h2>
    <div class="project">
      <div class="project-gif">
        <img src="Figs/gif/Metal_Protein.gif" alt="Metal Protein Prediction" />
      </div>
      <div class="project-content">
        <h3>
          <a href="#" target="_blank">Using Deep Learning Methods to Predict Metal Sites in Metalloproteins</a>
        </h3>
        <p><em>M.Sc. Thesis, University of Bern</em></p>
        <p><strong>Jingkai LAN</strong>, Giulia Peteani, Thomas Lemmin</p>
        <p>
          Integrated metal-binding protein sequences and extracted binding-site data from two publicly available databases (MESPEUS and MbPA). Generated non-metal-binding protein sequences by mutating metal-binding sites of metalloproteins using AI-driven protein design and structural prediction tools (ProteinMPNN, ESM-Fold and CHAI 1). Annotated enzyme information with PDB enzyme classification and BRENDA. Developed and trained four deep-learning models to classify metalloproteins (BERT + Adapter), predict enzymatic activity (embedding + ML), and identify metal-binding sites (PeSTo).
        </p>
        <div class="project-buttons">
          <a class="btn" href="Document/Slides/Metal_binding_site_prediction_of_Metalloprotein.pdf" target="_blank">Slides</a>
        </div>
      </div>
    </div>
  </section>

  <hr style="border: 0; height: 1px; background: #e5e7eb; margin: 0;" />

  <!-- ===== 合作 Logo  ===== -->
  <section class="collab-logos">
    <a href="https://www.unibe.ch/" target="_blank" rel="noopener noreferrer">
      <img src="Figs/logos/bern_logo.png" alt="University of Bern logo" />
    </a>
    <a href="https://www.shzu.edu.cn/" target="_blank" rel="noopener noreferrer">
      <img src="Figs/logos/Shihezi_University_logo.png" alt="Shihezi University logo" />
    </a>
  </section>

  <!-- ===== 世界访客地图 ===== -->
  <section style="max-width: 900px; margin: 0 auto; padding: 0 20px 60px;">
    <h2>Visitor Map</h2>
    <p style="font-size:0.9rem;color:#555;">Each dot marks a unique visit (based on IP &amp; coarse geo-location). Data are stored anonymously in Firebase Realtime Database.</p>
    <div id="map"></div>
  </section>

  <!-- Leaflet JS -->
  <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.js"></script>

  <script>
    // ------------------ Firebase INITIALISATION ------------------
    // 1. Replace the placeholder values with your own Firebase project configuration.
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      databaseURL: "https://YOUR_PROJECT_ID-default-rtdb.firebaseio.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT_ID.appspot.com",
      messagingSenderId: "SENDER_ID",
      appId: "APP_ID"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // ------------------ Leaflet MAP ------------------
    const map = L.map('map').setView([20, 0], 2); // Center on world

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 18,
      attribution: '&copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors'
    }).addTo(map);

    // Simple icon style
    const visitorIcon = L.circleMarker([0,0], {
      radius: 6,
      fillColor: '#2563eb',
      color: '#2563eb',
      weight: 1,
      opacity: 1,
      fillOpacity: 0.8
    });

    // ------------------ Helper Functions ------------------
    function addMarker(lat, lon) {
      L.circleMarker([lat, lon], {
        radius: 5,
        fillColor: '#2563eb',
        color: '#1d4ed8',
        weight: 1,
        opacity: 0.9,
        fillOpacity: 0.8
      }).addTo(map);
    }

    function writeVisit(ip, lat, lon, city, country) {
      const ts = Date.now();
      db.ref('visitors').push({ ip, lat, lon, city, country, ts });
    }

    function alreadyLogged(ip, callback) {
      db.ref('visitors').orderByChild('ip').equalTo(ip).once('value', snap => {
        callback(snap.exists());
      });
    }

    function loadMarkers() {
      db.ref('visitors').once('value', snapshot => {
        snapshot.forEach(child => {
          const { lat, lon } = child.val();
          if (lat && lon) addMarker(lat, lon);
        });
      });
    }

    // ------------------ Main: on page load ------------------
    fetch('https://ipapi.co/json/')
      .then(resp => resp.json())
      .then(data => {
        const ip = data.ip;
        const lat = parseFloat(data.latitude);
        const lon = parseFloat(data.longitude);
        const city = data.city;
        const country = data.country_name;

        // Check if IP already stored to avoid duplicates
        alreadyLogged(ip, exists => {
          if (!exists) {
            writeVisit(ip, lat, lon, city, country);
          }
        });
      })
      .catch(err => console.error('IP lookup failed:', err))
      .finally(loadMarkers);
  </script>
</body>
</html>